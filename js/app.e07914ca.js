(function(e){function t(t){for(var i,r,s=t[0],c=t[1],u=t[2],d=0,l=[];d<s.length;d++)r=s[d],a[r]&&l.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(l.length)l.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},r={app:0},a={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-13830644":"d2462e81","chunk-3cd17f7f":"402e9374","chunk-1a36f923":"694eeeb1","chunk-25f8063a":"77a6eb5d","chunk-30cb989f":"bfe23b00","chunk-5e05dcdc":"c9fc7057","chunk-3eb6295a":"ff36362d","chunk-56a77ee6":"ace2a75b","chunk-9bdb5b02":"3abde6e1"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-3cd17f7f":1,"chunk-1a36f923":1,"chunk-30cb989f":1,"chunk-5e05dcdc":1,"chunk-3eb6295a":1,"chunk-56a77ee6":1,"chunk-9bdb5b02":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-13830644":"31d6cfe0","chunk-3cd17f7f":"23a538f2","chunk-1a36f923":"7f22ca69","chunk-25f8063a":"31d6cfe0","chunk-30cb989f":"dc6bc71e","chunk-5e05dcdc":"83f0c74f","chunk-3eb6295a":"43359691","chunk-56a77ee6":"f5534202","chunk-9bdb5b02":"16db41ba"}[e]+".css",a=c.p+i,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===i||d===a))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===i||d===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete r[e],h.parentNode.removeChild(h),n(o)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)}).then(function(){r[e]=0}));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise(function(t,n){i=a[e]=[t,n]});t.push(i[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e),u=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");o.type=i,o.request=r,n[1](o)}a[e]=void 0}};var l=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var h=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"223d":function(e,t){},"3c85":function(e,t,n){"use strict";(function(e){var i=n("897d"),r=n.n(i),a=n("f753"),o=n.n(a),s=n("fab7");function c(e){let t=new SpeechSynthesisUtterance(e);speechSynthesis.speak(t)}function u(e,t){var n=t.some(function(t){return e.toString().indexOf(t)>-1});return n}window.emitter=new s.EventEmitter;var d=null,l=!1,h=!1;(function(){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,!navigator.getUserMedia)return alert("抱歉您的设备无法开启语音"),!1;var e=function(e){var t={};t.sampleBits=t.smapleBits||16,t.sampleRate=16e3;var n=new AudioContext,i=n.createMediaStreamSource(e),r=n.createScriptProcessor(4096,1,1),a={size:0,buffer:[],inputSampleRate:n.sampleRate,inputSampleBits:16,outputSampleRate:t.sampleRate,oututSampleBits:t.sampleBits,clear:function(){this.buffer=[],this.size=0},input:function(e){this.buffer.push(new Float32Array(e)),this.size+=e.length},compress:function(){for(var e=new Float32Array(this.size),t=0,n=0;n<this.buffer.length;n++)e.set(this.buffer[n],t),t+=this.buffer[n].length;var i=parseInt(this.inputSampleRate/this.outputSampleRate),r=e.length/i,a=new Float32Array(r),o=0,s=0;while(o<r)a[o]=e[s],s+=i,o++;return a},encodeWAV:function(){var e=Math.min(this.inputSampleRate,this.outputSampleRate),t=Math.min(this.inputSampleBits,this.oututSampleBits),n=this.compress(),i=n.length*(t/8),r=new ArrayBuffer(44+i),a=new DataView(r),o=1,s=0,c=function(e){for(var t=0;t<e.length;t++)a.setUint8(s+t,e.charCodeAt(t))};if(c("RIFF"),s+=4,a.setUint32(s,36+i,!0),s+=4,c("WAVE"),s+=4,c("fmt "),s+=4,a.setUint32(s,16,!0),s+=4,a.setUint16(s,1,!0),s+=2,a.setUint16(s,o,!0),s+=2,a.setUint32(s,e,!0),s+=4,a.setUint32(s,o*e*(t/8),!0),s+=4,a.setUint16(s,o*(t/8),!0),s+=2,a.setUint16(s,t,!0),s+=2,c("data"),s+=4,a.setUint32(s,i,!0),s+=4,8===t)for(var u=0;u<n.length;u++,s++){var d=Math.max(-1,Math.min(1,n[u])),l=d<0?32768*d:32767*d;l=parseInt(255/(65535/(l+32768))),a.setInt8(s,l,!0)}else for(u=0;u<n.length;u++,s+=2){d=Math.max(-1,Math.min(1,n[u]));a.setInt16(s,d<0?32768*d:32767*d,!0)}return new Blob([a],{type:"audio/wav"})}};this.start=function(){i.connect(r),r.connect(n.destination)},this.stop=function(){r.disconnect()},this.getBlob=function(){return a.encodeWAV()},this.clear=function(){a.clear()},r.onaudioprocess=function(e){a.input(e.inputBuffer.getChannelData(0))}};e.get=function(t){t&&navigator.getUserMedia&&navigator.getUserMedia({audio:!0},function(n){var i=new e(n);t(i)},function(e){console.log(e)})},e.get(function(e){d=e,d.clear(),setTimeout(function(){l=!0},6e3)})})(),t["a"]={data(){return{}},methods:{getSpeak(e){var t="888d8b31b1e84e8d8c410f934279f68c",n="6566e39f2f1f4f3cb5cee6334bde92fe",i="nli",a=(new Date).getTime(),s=n+"api="+i+"appkey="+t+"timestamp="+a+n,u=(e=e,"http://cn.olami.ai/cloudservice/api?appkey=888d8b31b1e84e8d8c410f934279f68c&api=nli&timestamp="+a+"&sign="+r()(s)+"&rq={'data':{'input_type':1,'text':'"+e+"'},'data_type':'stt'}");o.a.post(u).then(function(e){window.speechSynthesis.cancel(),c(e.data.data.nli[0].desc_obj.result)}).catch(function(e){console.log(e)})},handleText(e){var t=this;return u(e,["一键护航","一件护航","意见护航","护航","一键","一件","意见"])?("开启--一键护航"==e?emitter.emit("speak","一键护航"):emitter.emit("speak","好的"),t.jump("answer"),!1):u(e,["车辆轨迹页面","车辆轨迹","轨迹"])?("查看--车辆轨迹"==e?emitter.emit("speak","车辆轨迹"):emitter.emit("speak","好的"),t.jump("viewthree"),!1):u(e,["入口页","入口也","入口"])?("返回--入口页"==e?emitter.emit("speak","入口页"):emitter.emit("speak","好的"),t.jump("newIndex"),!1):u(e,["出车辆情况","出车辆","出车","出，车"])?("查看--出车辆"==e?emitter.emit("speak","出车辆"):emitter.emit("speak","好的"),t.jump("newviewDetail"),!1):u(e,["丁萍也","定屏页","定屏也","定屏","电瓶液","定皮业","地皮业","地皮","定皮","电瓶"])?("跳转--定屏页"==e?emitter.emit("speak","定屏页"):emitter.emit("speak","好的"),t.jump("page6"),!1):void emitter.emit("speak",e)}},beforeCreate(){},created(){var e=this,t=new WebSocket("ws://100.1.1.194:8888/realTalk");t.onmessage=function(t){var n=t.data;e.handleText(n)}},mounted(){var t=this;emitter.on("speak",function(e){return"好的"==e?(c("好的"),!1):"一键护航"==e||"车辆轨迹"==e||"入口页"==e||"出车辆"==e||"定屏页"==e?(c(e),!1):void t.getSpeak(e)}),document.onkeydown=function(e){if(console.log(e.keyCode),32===e.keyCode){if(!window.animationOK||!l)return!1;h?(window.speechSynthesis.cancel(),c("思考中，请稍等")):(d.start(),window.speechSynthesis.cancel())}else if(121===e.keyCode)console.log("全屏");else{if(!window.animationOK||!l)return!1;window.speechSynthesis.cancel(),c("请长按空格键说话，说话结束松开按键")}},document.onkeyup=function(n){if(32===n.keyCode){if(!window.animationOK||!l)return!1;if(e(".text").hide(),!h){h=!0;let n=d.getBlob();d.stop();let i=new FormData;i.append("name","wiiiiiinney"),i.append("file",n),e("#jumpLayer").show();let r={headers:{"Content-Type":"multipart/form-data"}};return o.a.post("/getmsg",i,r).then(function(n){e("#jumpLayer").hide(),h=!1,console.log(n.data.result),n.data.result?t.handleText(n.data.result):e(".text").show()}).catch(function(t){h=!1,console.log(t),window.speechSynthesis.cancel(),c("请重试"),e("#jumpLayer").hide()}),d.clear(),!1}}}}}}).call(this,n("debc"))},"56d7":function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"format",function(){return S}),n.d(i,"toFix",function(){return x}),n.d(i,"toFix2",function(){return j}),n.d(i,"substrStr",function(){return A}),n.d(i,"checkStatus",function(){return F});var r=n("6e6d"),a=(n("b20f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),n("router-view")],1)}),o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"jumpLayer"}},[n("div",{staticClass:"jumpLayer_wrap"},[n("div",{staticClass:"loader-15"})])])}],s=n("3c85"),c=n("7154"),u=n("b775"),d={name:"app",mixins:[s["a"]],provide(){return{app:this,transitionName:"fold-left"}},data(){return{VUE_APP_VERSION:"1.2.0"}},computed:{menuStyle(){return{zoom:this.scaling.zoom}}},watch:{$route(e,t){e.meta.index>t.meta.index?this.transitionName="fold-left":this.transitionName="fold-right"}},methods:{initAutoJob(){this.autoJob=new c["a"](1e4,()=>{document.querySelectorAll(".map_button")[0].children[1].click(),this.deleteAutoJob()}),this.Scheduler.add(this.autoJob)},jump(e){this.$router.push(e)},deleteAutoJob(){this.autoJob&&this.autoJob.delete()}},beforeCreate(){this.Scheduler=new c["b"],this.Scheduler.run(),this.loginJob=new c["a"](36e5,u["b"]),this.Scheduler.add(this.loginJob)},mounted(){}},l=d,h=(n("5c0b"),n("6691")),f=Object(h["a"])(l,a,o,!1,null,null,null),p=f.exports,m=n("3bc2");r["default"].use(m["a"]);const b=[{path:"*",redirect:"/",hidden:!0},{name:"404",path:"/404",redirect:"",component:()=>n.e("chunk-56a77ee6").then(n.bind(null,"8cdb")),hidden:!0},{name:"index",path:"/",redirect:"/newIndex",component:()=>n.e("chunk-9bdb5b02").then(n.bind(null,"a348")),chunkName:"views/index",children:[{name:"newIndex",path:"/newIndex",component:()=>n.e("chunk-9bdb5b02").then(n.bind(null,"a348")),chunkName:"views/index",meta:{name:"先离场后付费",index:1,title:"首页",auth:!0}}],hidden:!0},{name:"answer",path:"/answer",meta:{index:2,title:"其他页面",auth:!0},component:()=>Promise.all([n.e("chunk-13830644"),n.e("chunk-3cd17f7f"),n.e("chunk-1a36f923")]).then(n.bind(null,"daa5"))},{name:"viewthree",path:"/viewthree",meta:{index:3,title:"大屏显示3",auth:!0},component:()=>Promise.all([n.e("chunk-13830644"),n.e("chunk-3eb6295a")]).then(n.bind(null,"0118"))},{name:"page6",path:"/page6",meta:{index:4,title:"大屏显示",auth:!0},component:()=>Promise.all([n.e("chunk-13830644"),n.e("chunk-3cd17f7f"),n.e("chunk-25f8063a"),n.e("chunk-5e05dcdc")]).then(n.bind(null,"ad66"))},{name:"newviewDetail",path:"/newviewDetail",meta:{index:4,title:"大屏显示",auth:!0},component:()=>Promise.all([n.e("chunk-13830644"),n.e("chunk-3cd17f7f"),n.e("chunk-25f8063a"),n.e("chunk-30cb989f")]).then(n.bind(null,"5c5d"))}];var w=new m["a"]({scrollBehavior:()=>({y:0}),routes:b}),g=n("fed1"),v=n.n(g),k=n("f753"),y=n.n(k);const S=e=>{if(e||0===e||"0"===e){const i=parseFloat(e);if(-1!==i.toString().indexOf(".")){var t=i.toLocaleString();return t}var n=i.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,");return n}},x=e=>{if(e||0===e||"0"===e){const t=parseFloat(e);return t.toFixed(1)}},j=e=>{if(e||0===e||"0"===e){const t=parseFloat(e);return t.toFixed(2)}},A=e=>{if(e){if(e.length>8){const t=e.substr(0,8);return t+"..."}return e}},F=e=>{const t=[{code:0,name:"待审批"},{code:50,name:"同意"},{code:51,name:"进行中"},{code:70,name:"已完成"},{code:75,name:"异常"},{code:80,name:"取消"},{code:100,name:"拒绝"}];if(e){let n="";return t.map(t=>{return t.code===e&&(n=t.name),n}),n}};var C=n("37f8");n("a8a3"),n("debc"),n("223d");r["default"].component("happy-scroll",C["HappyScroll"]);const B="https://172.18.109.110/api/v1/login";r["default"].config.productionTip=!1,Object.keys(i).forEach(e=>{r["default"].filter(e,i[e])});const D=function(){new r["default"]({el:"#app",router:w,render:e=>e(p)})},O=()=>{return new Promise((e,t)=>{y()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:B,data:v.a.stringify({username:"9FAB40082F564E75AE3C10DDA69715F9",password:"03818B6ADD9D4F648BFB588E7A6BF88E"})}).then(t=>{console.log(t,"res::::::::::: login"),t.data?(window.accesstoken=t.data,e(t.data)):window.accesstoken=t}).catch(()=>{t()})})};O().then(()=>{D()}).catch(()=>{D()})},"5c0b":function(e,t,n){"use strict";var i=n("9074"),r=n.n(i);r.a},7154:function(e,t,n){"use strict";let i=0;const r="webkit moz ms o".split(" ");let a,o;const s="undefined"===typeof window;if(s)a=function(){},o=function(){};else{let e;a=window.requestAnimationFrame,o=window.cancelAnimationFrame;for(let t=0;t<r.length;t++){if(a&&o)break;e=r[t],a=a||window[e+"RequestAnimationFrame"],o=o||window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]}a&&o||(a=function(e){const t=(new Date).getTime(),n=Math.max(0,16-(t-i)),r=window.setTimeout(()=>{e(t+n)},n);return i=t+n,r},o=function(e){window.clearTimeout(e)})}n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p});const c=n("fab7"),u=Object.prototype.toString;function d(e){return"[object Function]"===u.call(e)}function l(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function h(){return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}class f extends c{constructor(e,t,n){super(),this.id=h(),this.interval=Math.max(1e3,e),this.time=!0===n?Date.now():Date.now()+this.interval,this.params=t,this.delFlag=!1,this.isRunning=!1}nextTime(){this.isRunning=!1,this.time=Date.now()+this.interval}delete(){this.delFlag=!0}run(){d(this.params)&&!1===this.params()?this.delFlag=!0:this.nextTime()}}class p extends c{constructor(e){super(),this.opts=e,this.jobList=new Map}add(e){this.jobList.set(e.id,e)}remove(e){this.jobList.delete(e.id)}dojob(){this.jobList.forEach(e=>{!0===e.delFlag?(e.emit("delete"),this.remove(e)):!0!==e.isRunning&&e.time<=Date.now()&&setTimeout(function(){e.isRunning=!0,e.run()},0)}),this.ra=a(this.dojob.bind(this))}run(){this.ra=a(this.dojob.bind(this))}stop(){o(this.ra)}}},9074:function(e,t,n){},b20f:function(e,t,n){},b775:function(e,t,n){"use strict";n.d(t,"b",function(){return h});var i=n("f753"),r=n.n(i),a=n("fed1"),o=n.n(a),s=n("ed08");const c=Object.prototype.toString,u="XHR::::",d=r.a.create({timeout:15e3});d.interceptors.request.use(e=>{return e.headers["Authorization"]=window.accesstoken,e},e=>{return Promise.reject(e)}),d.interceptors.response.use(e=>{const{data:t,request:n}=e,i=Object(s["a"])(t)?JSON.parse(t):t,r=i&&i.code||" -- ",a="Info:"+r+" "+n.responseURL;return 401===i.code?Promise.reject(a):"object"===typeof i?("[object Array]"===c.call(i)&&0===i.length&&console.log(u,"空数组:"),i):(console.log(u,"原始请求:"),e)},e=>{return console.log("err"+e),Promise.reject(e)});const l="https://172.18.109.110/api/v1/login";function h(){return r()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:l,data:o.a.stringify({username:"B1CC8F42C1A8420286576D4E489F4B4B",password:"ED59DD2467AB4A26ACEB4047562706BC"})}).then(e=>{return console.log(e,"res::::::::::: login"),e.data?window.accesstoken=e.data:window.accesstoken=e,e})}t["a"]=d},ed08:function(e,t,n){"use strict";function i(e,t){if(0===arguments.length)return null;if(!e)return"";const n=t||"yyyy-mm-dd hh:ii:ss";let i;"object"===typeof e?i=e:(10===(""+e).length&&(e=1e3*parseInt(e)),i=new Date(e));const r={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},a=n.replace(/(y|m|d|h|i|s|a)+/gi,(e,t)=>{let n=r[t];return"a"===t?["一","二","三","四","五","六","日"][n-1]:(e.length>0&&n<10&&(n="0"+n),n||0)});return a}function r(e){if("string"!==typeof e)return!1;try{const n=JSON.parse(e);return"[object Object]"===Object.prototype.toString.call(n)}catch(t){return!1}}n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});function a(e){return e?e.split(",").map(e=>{const t=e.split(" ");return[Number(t[1]),Number(t[0])]}):[]}}});
//# sourceMappingURL=app.e07914ca.js.map